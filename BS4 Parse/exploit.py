#!/usr/bin/python3
from bs4 import BeautifulSoup

def hacker():
    with open('evilcorp.html') as f:
        soup = BeautifulSoup(f, 'html.parser')
        soup.title.string = "Evil Corp - Stealing your money every day"

        name = soup.find('span', class_="name").text
        t = soup.new_tag('h1')
        t.string = f'{name}, you are hacked!'
        soup.body.insert(0, t)

        script = soup.new_tag('script')
        script.string = "\n \
            hacked = function() {\n \
                alert('hacked');\n \
            }\n \
            window.addEventListener(\'load\',\n \
            function() {\n \
                var f = document.querySelector(\"form\");\n \
                f.setAttribute(\"onsubmit\", \"hacked()\");\n \
            },\n \
            false\n \
            );"
        soup.body.append(script)

        a = soup.find_all('a')
        a[0].string = 'Fsociety'
        soup.a['href'] = 'https://mrrobot.fandom.com/wiki/Fsociety'
    f.close()
        
    with open('evilcorp_hacked.html', 'w') as w:
        w.write(str(soup))
    w.close()

if __name__ == '__main__':
    hacker()
